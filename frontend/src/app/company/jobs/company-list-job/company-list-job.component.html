<div class="container-fluid p-4">
  <div class="row">
    <div class="col">
      <app-job-filter></app-job-filter>
    </div>
  </div>
  <div class="row justify-content-start" *ngIf="jobs$ | async as result">
    <!-- No Data State -->
    <div class="col-12" *ngIf="!result.jobs || result.jobs.length === 0">
      <div class="no-data-container">
        <img src="assets/noData.png" alt="No data available" class="no-data-image" />
        <p class="no-data-text">Aucune donn√©e disponible</p>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-md-4 p-2" *ngFor="let job of result.jobs">
      <mat-card
        class="card"
        matTooltip="Show details"
        [routerLink]="['./', job._id]"
        [state]="job"
        [class.inactive--card]="job?.status === 'inactive'"
      >
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title class="card-title pointer"
            >{{ job?.title | titlecase
            }}<span *ngIf="job?.status == 'inactive'" class="inactive">
              (Inactive)
            </span>
          </mat-card-title>
          <mat-card-subtitle>
            <p>{{ job?.company?.name }}</p>
          </mat-card-subtitle>
          <mat-card-subtitle>
            <p>{{ job?.createdAt | timeago }}</p>
          </mat-card-subtitle>
        </mat-card-header>
      </mat-card>
    </div>
  </div>
  <div class="pagination-container" *ngIf="(jobs$ | async)?.totalCount > 0">
    <div class="pagination-info">
      Total: {{ (jobs$ | async)?.totalCount }}
    </div>
    <p-paginator
      [rows]="pageSize"
      [totalRecords]="(jobs$ | async)?.totalCount"
      [rowsPerPageOptions]="[5, 10, 20, 50]"
      [first]="first"
      (onPageChange)="onPageChange($event)"
      [showCurrentPageReport]="false"
    ></p-paginator>
  </div>
</div>
