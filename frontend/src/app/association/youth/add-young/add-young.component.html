<div class="add-young-container">
  <form [formGroup]="YONG_FORM" (submit)="this.YONG_FORM.valid && add()">
    <mat-horizontal-stepper #stepper [linear]="false">
      <!-- Step 1: Personal Information -->
      <mat-step
        #step1
        formGroupName="personal_info"
        [stepControl]="YONG_FORM.controls['personal_info']"
      >
        <ng-template matStepLabel>Renseignements personnels</ng-template>
        <div class="step-content-card">
          <app-young-personal-info
            [formGroup]="YONG_FORM.controls['personal_info']"
          ></app-young-personal-info>

          <div class="step-navigation">
            <span></span>
            <button class="btn-next" type="button" matStepperNext>
              Suivant
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
      </mat-step>

      <!-- Step 2: Skills Assessment -->
      <mat-step
        #step2
        formGroupName="skills_assessment"
        [stepControl]="YONG_FORM.controls['skills_assessment']"
      >
        <ng-template matStepLabel>Bilan de compétences</ng-template>
        <div class="step-content-card">
          <app-young-skills-assessment
            *ngIf="step1.interacted"
            [formGroup]="YONG_FORM.controls['skills_assessment']"
          ></app-young-skills-assessment>

          <div class="step-navigation">
            <button class="btn-back" type="button" matStepperPrevious>
              <mat-icon>arrow_back</mat-icon>
              Retour
            </button>
            <button class="btn-next" type="button" matStepperNext>
              Suivant
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
      </mat-step>

      <!-- Step 3: Capacity Building -->
      <mat-step
        #step3
        formGroupName="capacity_building"
        [stepControl]="YONG_FORM.controls['capacity_building']"
      >
        <ng-template matStepLabel>Renforcement de capacités</ng-template>
        <div class="step-content-card">
          <app-young-capacity-building
            *ngIf="step2.interacted"
            [formGroup]="YONG_FORM.controls['capacity_building']"
          ></app-young-capacity-building>

          <div class="step-navigation">
            <button class="btn-back" type="button" matStepperPrevious>
              <mat-icon>arrow_back</mat-icon>
              Retour
            </button>
            <button class="btn-next" type="button" matStepperNext>
              Suivant
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
      </mat-step>

      <!-- Step 4: PASSWORK Training -->
      <mat-step
        #step4
        formGroupName="passwork"
        [stepControl]="YONG_FORM.controls['passwork']"
      >
        <ng-template matStepLabel>Formations PASSWORK</ng-template>
        <div class="step-content-card">
          <app-young-passwork
            *ngIf="step3.interacted"
            [formGroup]="YONG_FORM.controls['passwork']"
          ></app-young-passwork>

          <div class="step-navigation">
            <button class="btn-back" type="button" matStepperPrevious>
              <mat-icon>arrow_back</mat-icon>
              Retour
            </button>
            <button class="btn-next" type="button" matStepperNext>
              Suivant
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
      </mat-step>

      <!-- Step 5: Insertion -->
      <mat-step
        #step5
        formGroupName="insertion"
        [stepControl]="YONG_FORM.controls['insertion']"
      >
        <ng-template matStepLabel>Insertion</ng-template>
        <div class="step-content-card">
          <app-young-insertion
            *ngIf="step4.interacted"
            [formGroup]="YONG_FORM.controls['insertion']"
          ></app-young-insertion>

          <div class="step-navigation">
            <button class="btn-back" type="button" matStepperPrevious>
              <mat-icon>arrow_back</mat-icon>
              Retour
            </button>
            <button class="btn-next" type="button" matStepperNext>
              Suivant
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
      </mat-step>

      <!-- Step 6: Finalization -->
      <mat-step>
        <ng-template matStepLabel>Finaliser</ng-template>
        <div class="step-content-card">
          <div class="final-step">
            <div class="success-icon-wrapper">
              <div class="success-circle">
                <mat-icon class="check-icon">task_alt</mat-icon>
              </div>
              <div class="decoration-dots"></div>
            </div>

            <h2 class="success-title">Prêt à soumettre!</h2>
            <p class="success-message">
              Vous avez complété toutes les étapes. Vérifiez vos informations et soumettez le formulaire.
            </p>

            <div class="final-actions">
              <button class="btn-back" type="button" matStepperPrevious>
                <mat-icon>arrow_back</mat-icon>
                Retour
              </button>
              <button
                class="btn-submit"
                [disabled]="!YONG_FORM.valid"
                type="submit"
              >
                <mat-icon>check_circle</mat-icon>
                Soumettre
              </button>
            </div>
          </div>
        </div>
      </mat-step>
    </mat-horizontal-stepper>
  </form>
</div>
