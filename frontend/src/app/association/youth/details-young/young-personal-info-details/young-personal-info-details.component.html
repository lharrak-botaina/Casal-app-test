<!-- Status Banner -->
<div class="status-banner" *ngIf="isFull">
  <div class="status-badge" [class.inserted]="status" [class.not-inserted]="!status">
    <mat-icon>{{ status ? 'check_circle' : 'pending' }}</mat-icon>
    <span>{{ status ? 'Inséré(e)' : 'Non Inséré(e)' }}</span>
  </div>
  <div class="priority-alert" *ngIf="!status && personalInfo?.isPriority">
    <mat-icon>priority_high</mat-icon>
    <span>Besoin d'insertion immédiat !</span>
  </div>
</div>

<!-- Profile Header Card -->
<div class="profile-section">
  <div class="profile-card">
    <div class="profile-photo-wrapper">
      <div class="photo-container">
        <img
          [src]="personalInfo?.photo ? host + personalInfo?.photo : 'assets/no_picture_available.png'"
          alt="Photo de profil"
          class="profile-photo"
        />
      </div>
      <h3 class="profile-name">{{ personalInfo?.fullname | titlecase }}</h3>
      <span class="profile-id">ID: {{ personalInfo?.identifier }}</span>
    </div>
  </div>

  <div class="info-card general-info">
    <div class="card-header">
      <mat-icon>info</mat-icon>
      <h2>Informations générales</h2>
    </div>
    <div class="card-body">
      <div class="info-grid">
        <div class="info-item">
          <span class="info-label">Adresse</span>
          <span class="info-value">{{ personalInfo?.address | titlecase }} {{ personalInfo?.city | titlecase }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Date de naissance</span>
          <span class="info-value">{{ personalInfo?.birth_date | date: "dd/MM/yyyy" }}</span>
        </div>
        <div class="info-item" *ngIf="isFull">
          <span class="info-label">Date d'inscription</span>
          <span class="info-value">{{ personalInfo?.inscription_date | date: "dd/MM/yyyy" }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Genre</span>
          <span class="info-value">{{ personalInfo?.gendre | titlecase }}</span>
        </div>
        <div class="info-item" *ngIf="isFull">
          <span class="info-label">Téléphone</span>
          <span class="info-value">{{ personalInfo?.phone }}</span>
        </div>
        <div class="info-item" *ngIf="isFull">
          <span class="info-label">Numéro CIN</span>
          <span class="info-value">{{ personalInfo?.cin_id }}</span>
        </div>
        <div class="info-item" *ngIf="isFull">
          <span class="info-label">Numéro CNSS</span>
          <span class="info-value">{{ personalInfo?.cnss_id }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Nationalité</span>
          <span class="info-value">{{ personalInfo?.nationality }}</span>
        </div>
        <div class="info-item" *ngIf="personalInfo?.nationality_comment">
          <span class="info-label">Commentaire nationalité</span>
          <span class="info-value">{{ personalInfo?.nationality_comment }}</span>
        </div>
        <div class="info-item" *ngIf="isFull">
          <span class="info-label">Comment connu notre service</span>
          <span class="info-value">{{ personalInfo?.connectedBy | titlecase }}</span>
        </div>
        <div class="info-item" *ngIf="personalInfo?.hobbies">
          <span class="info-label">Loisirs</span>
          <span class="info-value">{{ personalInfo?.hobbies }}</span>
        </div>
        <div class="info-item" *ngIf="!isFull">
          <span class="info-label">Association</span>
          <a [routerLink]="['./association/', associationId]" class="info-link">
            {{ associationName | titlecase }}
            <mat-icon>open_in_new</mat-icon>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Secondary Info Cards -->
<div class="cards-row">
  <div class="info-card">
    <div class="card-header">
      <mat-icon>family_restroom</mat-icon>
      <h2>Situation matrimoniale</h2>
    </div>
    <div class="card-body">
      <div class="info-grid single-column">
        <div class="info-item">
          <span class="info-label">État civil</span>
          <span class="info-value">{{ personalInfo?.civil_status | titlecase }}</span>
        </div>
        <div class="info-item" *ngIf="isFull">
          <span class="info-label">Nombre d'enfants</span>
          <span class="info-value">{{ personalInfo?.kids_nbr }}</span>
        </div>
        <div class="info-item" *ngIf="isFull">
          <span class="info-label">Logement</span>
          <span class="info-value">{{ personalInfo?.housing | titlecase }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="info-card flex-grow">
    <div class="card-header">
      <mat-icon>account_balance_wallet</mat-icon>
      <h2>Situation Socio Économique</h2>
    </div>
    <div class="card-body">
      <div class="info-grid single-column">
        <div class="info-item">
          <span class="info-label">Situation Actuelle</span>
          <span class="info-value">{{ personalInfo?.current_function }}</span>
        </div>
        <div class="info-item" *ngIf="isFull">
          <span class="info-label">Personnes à charge</span>
          <span class="info-value">{{ personalInfo?.people_in_charge_nbr }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Physical State Card -->
<div class="info-card full-width" *ngIf="isFull">
  <div class="card-header">
    <mat-icon>health_and_safety</mat-icon>
    <h2>État Physique</h2>
  </div>
  <div class="card-body">
    <div class="health-grid">
      <div class="health-item">
        <div class="health-question">
          <mat-icon [class.yes]="personalInfo?.physical_state?.addiction?.status">
            {{ personalInfo?.physical_state?.addiction?.status ? 'warning' : 'check_circle' }}
          </mat-icon>
          <div class="health-content">
            <span class="health-label">Addiction</span>
            <span class="health-status" [class.yes]="personalInfo?.physical_state?.addiction?.status">
              {{ personalInfo?.physical_state?.addiction?.status ? 'Oui' : 'Non' }}
            </span>
          </div>
        </div>
        <p class="health-details" *ngIf="personalInfo?.physical_state?.addiction?.status">
          {{ personalInfo?.physical_state?.addiction?.description | titlecase }}
        </p>
      </div>

      <div class="health-item">
        <div class="health-question">
          <mat-icon [class.yes]="personalInfo?.physical_state?.handicap?.status">
            {{ personalInfo?.physical_state?.handicap?.status ? 'accessible' : 'check_circle' }}
          </mat-icon>
          <div class="health-content">
            <span class="health-label">Handicap</span>
            <span class="health-status" [class.yes]="personalInfo?.physical_state?.handicap?.status">
              {{ personalInfo?.physical_state?.handicap?.status ? 'Oui' : 'Non' }}
            </span>
          </div>
        </div>
        <p class="health-details" *ngIf="personalInfo?.physical_state?.handicap?.status">
          {{ personalInfo?.physical_state?.handicap?.description | titlecase }}
        </p>
      </div>

      <div class="health-item">
        <div class="health-question">
          <mat-icon [class.yes]="personalInfo?.physical_state?.health_issue?.status">
            {{ personalInfo?.physical_state?.health_issue?.status ? 'local_hospital' : 'check_circle' }}
          </mat-icon>
          <div class="health-content">
            <span class="health-label">Maladie chronique</span>
            <span class="health-status" [class.yes]="personalInfo?.physical_state?.health_issue?.status">
              {{ personalInfo?.physical_state?.health_issue?.status ? 'Oui' : 'Non' }}
            </span>
          </div>
        </div>
        <p class="health-details" *ngIf="personalInfo?.physical_state?.health_issue?.status">
          {{ personalInfo?.physical_state?.health_issue?.chronic_illness | titlecase }}
        </p>
      </div>

      <div class="health-item full-width-item" *ngIf="personalInfo?.physical_state?.health_issue?.ongoing_treatment">
        <div class="health-question">
          <mat-icon>medical_information</mat-icon>
          <div class="health-content">
            <span class="health-label">Antécédent médical affectant le travail</span>
            <span class="health-value">{{ personalInfo?.physical_state?.health_issue?.ongoing_treatment | titlecase }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
